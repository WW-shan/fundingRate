#!/bin/bash
# ç³»ç»ŸçŠ¶æ€æ£€æŸ¥è„šæœ¬

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  èµ„é‡‘è´¹ç‡å¥—åˆ©ç³»ç»Ÿ - çŠ¶æ€æ£€æŸ¥                         â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# æ£€æŸ¥è¿›ç¨‹
if ps aux | grep "python main.py" | grep -v grep > /dev/null; then
    PID=$(ps aux | grep "python main.py" | grep -v grep | awk '{print $2}')
    echo "âœ… ç³»ç»ŸçŠ¶æ€: è¿è¡Œä¸­"
    echo "   è¿›ç¨‹ID: $PID"
else
    echo "âŒ ç³»ç»ŸçŠ¶æ€: æœªè¿è¡Œ"
    exit 1
fi

# æ£€æŸ¥æ—¥å¿—
if [ -f "logs/app.log" ]; then
    echo ""
    echo "ğŸ“Š æœ€æ–°æ—¥å¿— (æœ€å10è¡Œ):"
    echo "----------------------------------------"
    tail -10 logs/app.log | sed 's/\x1b\[[0-9;]*m//g'
fi

# æ£€æŸ¥æ•°æ®åº“
if [ -f "data/database.db" ]; then
    echo ""
    echo "ğŸ’¾ æ•°æ®åº“: å­˜åœ¨"
    DB_SIZE=$(du -h data/database.db | cut -f1)
    echo "   å¤§å°: $DB_SIZE"
fi

# GitçŠ¶æ€
echo ""
echo "ğŸ“¦ GitçŠ¶æ€:"
git log --oneline -n 3

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "æç¤º: æŒ‰ Ctrl+C å¯ä»¥åœæ­¢ç³»ç»Ÿ"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
