<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç³»ç»Ÿé…ç½® - èµ„é‡‘è´¹ç‡å¥—åˆ©ç³»ç»Ÿ</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
      }
      .header {
        background: white;
        border-radius: 10px;
        padding: 20px 30px;
        margin-bottom: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      h1 {
        color: #667eea;
        font-size: 24px;
      }
      .nav {
        display: flex;
        gap: 15px;
      }
      .nav a {
        color: #667eea;
        text-decoration: none;
        padding: 8px 15px;
        border-radius: 5px;
        transition: all 0.3s;
      }
      .nav a:hover,
      .nav a.active {
        background: #667eea;
        color: white;
      }
      .content {
        background: white;
        border-radius: 10px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }
      .form-group {
        margin-bottom: 20px;
      }
      label {
        display: block;
        color: #374151;
        font-weight: 500;
        margin-bottom: 8px;
      }
      input[type="number"],
      input[type="text"],
      input[type="password"],
      select {
        width: 100%;
        padding: 10px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 14px;
      }
      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.3s;
      }
      .btn-primary {
        background: #667eea;
        color: white;
      }
      .btn-primary:hover {
        background: #5568d3;
      }
      .alert {
        padding: 12px;
        border-radius: 6px;
        margin-bottom: 20px;
        white-space: pre-line;
        line-height: 1.6;
      }
      .alert-success {
        background: #d1fae5;
        color: #065f46;
      }
      .alert-error {
        background: #fee2e2;
        color: #991b1b;
      }
      .alert-info {
        background: #dbeafe;
        color: #1e40af;
      }
      .section {
        margin-bottom: 30px;
        padding-bottom: 30px;
        border-bottom: 1px solid #e5e7eb;
      }
      .section:last-child {
        border-bottom: none;
      }
      h3 {
        color: #667eea;
        margin-bottom: 15px;
      }
      .loading {
        text-align: center;
        padding: 40px;
        color: #666;
      }
      .exchange-item {
        background: #f9fafb;
        padding: 15px;
        border-radius: 6px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .exchange-name {
        font-weight: 600;
        text-transform: uppercase;
        color: #667eea;
      }
      .exchange-status {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 500;
        margin-left: 10px;
      }
      .status-active {
        background: #d1fae5;
        color: #065f46;
      }
      .status-inactive {
        background: #fee2e2;
        color: #991b1b;
      }
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }
      .modal.show {
        display: flex;
      }
      .modal-content {
        background: white;
        padding: 30px;
        border-radius: 10px;
        max-width: 500px;
        width: 90%;
      }
      .modal-header {
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid #e5e7eb;
      }
      .modal-header h3 {
        margin: 0;
      }
      .modal-footer {
        margin-top: 20px;
        display: flex;
        gap: 10px;
        justify-content: flex-end;
      }
      .input-group {
        display: flex;
        align-items: center;
        gap: 0;
      }
      .input-group input {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        flex: 1;
      }
      .input-group .unit {
        background: #f3f4f6;
        border: 1px solid #d1d5db;
        border-left: none;
        padding: 10px 15px;
        border-top-right-radius: 6px;
        border-bottom-right-radius: 6px;
        color: #6b7280;
        font-size: 14px;
        white-space: nowrap;
        min-width: 80px;
        text-align: center;
      }
      .code-block {
        background: #1f2937;
        color: #10b981;
        padding: 10px;
        border-radius: 4px;
        font-family: "Courier New", monospace;
        font-size: 13px;
        margin-top: 8px;
      }
      .alert-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 2000;
        align-items: center;
        justify-content: center;
      }
      .alert-modal.show {
        display: flex;
      }
      .alert-modal-content {
        background: white;
        padding: 25px 30px;
        border-radius: 10px;
        max-width: 500px;
        width: 90%;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        position: relative;
      }
      .alert-modal-icon {
        font-size: 48px;
        text-align: center;
        margin-bottom: 15px;
      }
      .alert-modal-message {
        color: #374151;
        font-size: 15px;
        line-height: 1.6;
        white-space: pre-line;
        text-align: center;
        margin-bottom: 20px;
      }
      .alert-modal-close {
        padding: 10px 30px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        width: 100%;
        transition: all 0.3s;
      }
      .alert-modal-close.success {
        background: #10b981;
        color: white;
      }
      .alert-modal-close.success:hover {
        background: #059669;
      }
      .alert-modal-close.error {
        background: #ef4444;
        color: white;
      }
      .alert-modal-close.error:hover {
        background: #dc2626;
      }
      .alert-modal-close.info {
        background: #3b82f6;
        color: white;
      }
      .alert-modal-close.info:hover {
        background: #2563eb;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ç³»ç»Ÿé…ç½®</h1>
        <div class="nav">
          <a href="/">ä»ªè¡¨ç›˜</a>
          <a href="/opportunities">æœºä¼šç›‘æ§</a>
          <a href="/positions">æŒä»“ç®¡ç†</a>
          <a href="/config" class="active">ç³»ç»Ÿé…ç½®</a>
        </div>
      </div>

      <div class="content">
        <div id="alert-container"></div>

        <div class="section">
          <h3>äº¤æ˜“æ‰€è´¦æˆ·</h3>
          <div id="exchanges-list" class="loading">åŠ è½½ä¸­...</div>
          <button
            class="btn btn-primary"
            onclick="showAddExchangeModal()"
            style="margin-top: 15px"
          >
            æ·»åŠ äº¤æ˜“æ‰€
          </button>
        </div>

        <div class="section">
          <h3>å…¨å±€é…ç½®</h3>
          <div class="form-group">
            <label>æ€»èµ„é‡‘</label>
            <div class="input-group">
              <input type="number" id="total_capital" placeholder="100000" />
              <span class="unit">USDT</span>
            </div>
          </div>
          <div class="form-group">
            <label>æœ€å¤§èµ„é‡‘ä½¿ç”¨ç‡</label>
            <div class="input-group">
              <input
                type="number"
                step="0.01"
                id="max_capital_usage"
                placeholder="0.8"
              />
              <span class="unit">0-1ä¹‹é—´</span>
            </div>
          </div>
          <div class="form-group">
            <label>æœ€å¤§æŒä»“æ•°é‡</label>
            <div class="input-group">
              <input type="number" id="max_positions" placeholder="10" />
              <span class="unit">ä¸ª</span>
            </div>
          </div>
          <div class="form-group">
            <label>ä»·æ ¼åˆ·æ–°é—´éš”</label>
            <div class="input-group">
              <input
                type="number"
                id="price_refresh_interval"
                placeholder="5"
              />
              <span class="unit">ç§’</span>
            </div>
          </div>
          <div class="form-group">
            <label>èµ„é‡‘è´¹ç‡åˆ·æ–°é—´éš”</label>
            <div class="input-group">
              <input
                type="number"
                id="funding_refresh_interval"
                placeholder="300"
              />
              <span class="unit">ç§’</span>
            </div>
          </div>
          <div class="form-group">
            <label>æœºä¼šæ‰«æé—´éš”</label>
            <div class="input-group">
              <input
                type="number"
                id="opportunity_scan_interval"
                placeholder="300"
              />
              <span class="unit">ç§’</span>
            </div>
          </div>
        </div>

        <div class="section">
          <h3>ç­–ç•¥1: è·¨äº¤æ˜“æ‰€èµ„é‡‘è´¹ç‡å¥—åˆ©</h3>
          <div class="form-group">
            <label>å¯ç”¨çŠ¶æ€</label>
            <select id="strategy1_enabled">
              <option value="true">å¯ç”¨</option>
              <option value="false">ç¦ç”¨</option>
            </select>
          </div>
          <div class="form-group">
            <label>æ‰§è¡Œæ¨¡å¼</label>
            <select id="strategy1_execution_mode">
              <option value="auto">è‡ªåŠ¨</option>
              <option value="manual">æ‰‹åŠ¨</option>
            </select>
          </div>
          <div class="form-group">
            <label>é»˜è®¤å¼€ä»“é‡‘é¢</label>
            <div class="input-group">
              <input
                type="number"
                id="strategy1_position_size"
                placeholder="10000"
              />
              <span class="unit">USDT</span>
            </div>
          </div>
          <div class="form-group">
            <label>èµ„é‡‘è´¹ç‡æ”¶å–é¢‘ç‡</label>
            <select
              id="strategy1_funding_frequency"
              onchange="autoCalculateStrategy1()"
            >
              <option value="8">æ¯8å°æ—¶ä¸€æ¬¡ï¼ˆä¸»æµï¼‰</option>
              <option value="4">æ¯4å°æ—¶ä¸€æ¬¡</option>
            </select>
            <small style="color: #6b7280; font-size: 12px"
              >å¤§å¤šæ•°äº¤æ˜“æ‰€ä¸º8å°æ—¶ï¼Œéƒ¨åˆ†ä¸º4å°æ—¶</small
            >
          </div>
          <div class="form-group">
            <label>æœ€å°è´¹ç‡å·®</label>
            <div class="input-group">
              <input
                type="number"
                step="0.01"
                id="strategy1_min_funding_diff"
                placeholder="0.05"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >å•æ¬¡æ”¶ç›Šè¦æ±‚ï¼Œè¾“å…¥0.05è¡¨ç¤º0.05%</small
            >
          </div>
          <div class="form-group">
            <label>æœ€å°å‡€æ”¶ç›Šç‡</label>
            <div class="input-group">
              <input
                type="number"
                step="0.01"
                id="strategy1_min_profit_rate"
                placeholder="0.03"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >æ‰£é™¤æˆæœ¬åçš„å‡€æ”¶ç›Šï¼Œè¾“å…¥0.03è¡¨ç¤º0.03%</small
            >
          </div>
          <div class="form-group">
            <label>æœ€å¤§ä»·å·®å®¹å¿</label>
            <div class="input-group">
              <input
                type="number"
                step="0.01"
                id="strategy1_max_price_diff"
                placeholder="2"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >äº¤æ˜“æ‰€é—´ä»·æ ¼å·®å¼‚ä¸Šé™ï¼Œè¾“å…¥2è¡¨ç¤º2%</small
            >
          </div>
          <div class="form-group">
            <label>å•ç¬”æœ€å¤§ä»“ä½</label>
            <div class="input-group">
              <input
                type="number"
                id="strategy1_max_position_size"
                placeholder="15000"
              />
              <span class="unit">USDT</span>
            </div>
          </div>
        </div>

        <div class="section">
          <h3>ç­–ç•¥2A: ç°è´§-æœŸè´§èµ„é‡‘è´¹ç‡å¥—åˆ©</h3>
          <div class="form-group">
            <label>å¯ç”¨çŠ¶æ€</label>
            <select id="strategy2a_enabled">
              <option value="true">å¯ç”¨</option>
              <option value="false">ç¦ç”¨</option>
            </select>
          </div>
          <div class="form-group">
            <label>æ‰§è¡Œæ¨¡å¼</label>
            <select id="strategy2a_execution_mode">
              <option value="auto">è‡ªåŠ¨</option>
              <option value="manual">æ‰‹åŠ¨</option>
            </select>
          </div>
          <div class="form-group">
            <label>é»˜è®¤å¼€ä»“é‡‘é¢</label>
            <div class="input-group">
              <input
                type="number"
                id="strategy2a_position_size"
                placeholder="10000"
              />
              <span class="unit">USDT</span>
            </div>
          </div>
          <div class="form-group">
            <label>èµ„é‡‘è´¹ç‡æ”¶å–é¢‘ç‡</label>
            <select
              id="strategy2a_funding_frequency"
              onchange="autoCalculateStrategy2A()"
            >
              <option value="8">æ¯8å°æ—¶ä¸€æ¬¡ï¼ˆä¸»æµï¼‰</option>
              <option value="4">æ¯4å°æ—¶ä¸€æ¬¡</option>
            </select>
            <small style="color: #6b7280; font-size: 12px"
              >å¤§å¤šæ•°äº¤æ˜“æ‰€ä¸º8å°æ—¶ï¼Œéƒ¨åˆ†ä¸º4å°æ—¶</small
            >
          </div>
          <div class="form-group">
            <label>æœ€å°å¹´åŒ–è´¹ç‡</label>
            <div class="input-group">
              <input
                type="number"
                step="0.01"
                id="strategy2a_min_funding_rate"
                placeholder="30"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >èµ„é‡‘è´¹ç‡å¹´åŒ–å€¼ï¼Œè¾“å…¥30è¡¨ç¤º30%</small
            >
          </div>
          <div class="form-group">
            <label>åŸºå·®å®‰å…¨èŒƒå›´</label>
            <div class="input-group">
              <input
                type="number"
                step="0.01"
                id="strategy2a_max_basis_deviation"
                placeholder="1"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >åŸºå·®å®¹å¿åº¦ï¼Œè¾“å…¥1è¡¨ç¤º1%</small
            >
          </div>
          <div class="form-group">
            <label>æœ€å°å¹´åŒ–å‡€æ”¶ç›Šç‡</label>
            <div class="input-group">
              <input
                type="number"
                step="0.01"
                id="strategy2a_min_annual_net_return"
                placeholder="10"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >æ‰£é™¤æˆæœ¬åçš„å¹´åŒ–å‡€æ”¶ç›Šï¼Œè¾“å…¥10è¡¨ç¤º10%</small
            >
          </div>
          <div class="form-group">
            <label>å•ç¬”æœ€å¤§ä»“ä½</label>
            <div class="input-group">
              <input
                type="number"
                id="strategy2a_max_position_size"
                placeholder="15000"
              />
              <span class="unit">USDT</span>
            </div>
          </div>
        </div>

        <div class="section">
          <h3>ç­–ç•¥2B: ç°è´§-æœŸè´§åŸºå·®å¥—åˆ©</h3>
          <div class="form-group">
            <label>å¯ç”¨çŠ¶æ€</label>
            <select id="strategy2b_enabled">
              <option value="true">å¯ç”¨</option>
              <option value="false">ç¦ç”¨</option>
            </select>
          </div>
          <div class="form-group">
            <label>æ‰§è¡Œæ¨¡å¼</label>
            <select id="strategy2b_execution_mode">
              <option value="auto">è‡ªåŠ¨</option>
              <option value="manual">æ‰‹åŠ¨</option>
            </select>
          </div>
          <div class="form-group">
            <label>é»˜è®¤å¼€ä»“é‡‘é¢</label>
            <div class="input-group">
              <input
                type="number"
                id="strategy2b_position_size"
                placeholder="8000"
              />
              <span class="unit">USDT</span>
            </div>
          </div>
          <div class="form-group">
            <label>æœ€å°åŸºå·®</label>
            <div class="input-group">
              <input
                type="number"
                step="0.01"
                id="strategy2b_min_basis"
                placeholder="2"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >æ ¸å¿ƒç­›é€‰æ¡ä»¶ï¼šåŸºå·®æ”¶æ•›è‡³0çš„æ”¶ç›Š - æ‰‹ç»­è´¹ >
              0ã€‚å»ºè®®è®¾ç½®2%ä»¥ä¸Š</small
            >
          </div>
          <!-- ç›®æ ‡æ”¶ç›Šç‡å·²åºŸå¼ƒï¼Œéšè—ä½†ä¿ç•™ç”¨äºå‘åå…¼å®¹ -->
          <input type="hidden" id="strategy2b_target_return" value="0.015" />
          <div class="form-group">
            <label>æœ€å¤§æŒä»“å¤©æ•°</label>
            <div class="input-group">
              <input
                type="number"
                id="strategy2b_max_hold_days"
                placeholder="7"
              />
              <span class="unit">å¤©</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >åŸºå·®å¥—åˆ©æœ€é•¿æŒä»“æ—¶é—´ï¼Œå¦‚ 7 è¡¨ç¤ºæœ€å¤šæŒæœ‰ 7 å¤©</small
            >
          </div>
        </div>

        <div class="section">
          <h3>ç­–ç•¥3: å•è¾¹èµ„é‡‘è´¹ç‡è¶‹åŠ¿ç­–ç•¥ (é£é™©è¾ƒé«˜)</h3>
          <div class="form-group">
            <label>å¯ç”¨çŠ¶æ€</label>
            <select id="strategy3_enabled">
              <option value="true">å¯ç”¨</option>
              <option value="false">ç¦ç”¨</option>
            </select>
          </div>
          <div class="form-group">
            <label>ä»“ä½å¤§å° (ä½™é¢ç™¾åˆ†æ¯”)</label>
            <div class="input-group">
              <input
                type="number"
                step="1"
                id="strategy3_position_pct"
                placeholder="10"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >å æ€»èµ„é‡‘çš„ç™¾åˆ†æ¯”ï¼Œè¾“å…¥10è¡¨ç¤º10%</small
            >
          </div>
          <div class="form-group">
            <label>æœ€å°èµ„é‡‘è´¹ç‡ (å•æœŸ)</label>
            <div class="input-group">
              <input
                type="number"
                step="0.001"
                id="strategy3_min_funding_rate"
                placeholder="0.01"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >å¼€ä»“é—¨æ§›ï¼Œè¾“å…¥0.01è¡¨ç¤º0.01%</small
            >
          </div>
          <div class="form-group">
            <label>æ­¢æŸæ¯”ä¾‹</label>
            <div class="input-group">
              <input
                type="number"
                step="0.1"
                id="strategy3_stop_loss_pct"
                placeholder="5"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >ç¡¬æ­¢æŸçº¿ï¼ŒäºæŸè¾¾åˆ°æ­¤æ¯”ä¾‹ç«‹å³å¹³ä»“</small
            >
          </div>
          <div class="form-group">
            <label>æ˜¯å¦æ£€æŸ¥åŸºå·®æ–¹å‘</label>
            <select id="strategy3_check_basis">
              <option value="true">æ˜¯ (æ¨è)</option>
              <option value="false">å¦ (ä»…çœ‹è´¹ç‡)</option>
            </select>
            <small style="color: #6b7280; font-size: 12px"
              >åšç©ºæ—¶è¦æ±‚æœŸè´§ä»·æ ¼>ç°è´§ä»·æ ¼ï¼Œå¢åŠ èƒœç‡</small
            >
          </div>
          <div class="form-group">
            <label>åšç©ºé€€å‡ºè´¹ç‡é˜ˆå€¼</label>
            <div class="input-group">
              <input
                type="number"
                step="0.001"
                id="strategy3_short_exit_threshold"
                placeholder="0.000"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >åšç©ºæ—¶ï¼Œå¦‚æœè´¹ç‡è·Œç ´æ­¤å€¼(å¦‚0)åˆ™å¹³ä»“</small
            >
          </div>
          <div class="form-group">
            <label>åšå¤šé€€å‡ºè´¹ç‡é˜ˆå€¼</label>
            <div class="input-group">
              <input
                type="number"
                step="0.001"
                id="strategy3_long_exit_threshold"
                placeholder="0.000"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >åšå¤šæ—¶ï¼Œå¦‚æœè´¹ç‡æ¶¨ç ´æ­¤å€¼(å¦‚0)åˆ™å¹³ä»“</small
            >
          </div>
        </div>

        <div class="section">
          <h3>é£æ§é…ç½®</h3>
          <div class="form-group">
            <label>å•ç¬”æœ€å¤§äºæŸç‡</label>
            <div class="input-group">
              <input
                type="number"
                step="0.01"
                id="risk_max_loss_per_trade"
                placeholder="2"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >å•æ¬¡äº¤æ˜“æ­¢æŸçº¿ï¼Œè¾“å…¥2è¡¨ç¤º2%</small
            >
          </div>
          <div class="form-group">
            <label>æ€»èµ„é‡‘æœ€å¤§å›æ’¤ç‡</label>
            <div class="input-group">
              <input
                type="number"
                step="0.01"
                id="risk_max_drawdown"
                placeholder="10"
              />
              <span class="unit">%</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >æ€»èµ„é‡‘å›æ’¤ä¸Šé™ï¼Œè¾“å…¥10è¡¨ç¤º10%</small
            >
          </div>
          <div class="form-group">
            <label>å•äº¤æ˜“æ‰€æœ€å¤§ä»“ä½</label>
            <div class="input-group">
              <input
                type="number"
                id="risk_max_position_per_exchange"
                placeholder="30000"
              />
              <span class="unit">USDT</span>
            </div>
            <small style="color: #6b7280; font-size: 12px"
              >å•ä¸ªäº¤æ˜“æ‰€æœ€å¤§æŒä»“é‡‘é¢ï¼Œåˆ†æ•£é£é™©</small
            >
          </div>
          <div class="form-group">
            <label>åŠ¨æ€ä»“ä½è°ƒæ•´</label>
            <select id="risk_dynamic_position_enabled">
              <option value="true">å¯ç”¨</option>
              <option value="false">ç¦ç”¨</option>
            </select>
          </div>
        </div>

        <button
          id="saveConfigBtn"
          class="btn btn-primary"
          onclick="saveConfig(event)"
          style="margin-top: 20px"
        >
          ğŸ’¾ ä¿å­˜æ‰€æœ‰é…ç½®
        </button>
      </div>
    </div>

    <!-- æç¤ºå¼¹çª— -->
    <div id="alertModal" class="alert-modal">
      <div class="alert-modal-content">
        <div class="alert-modal-icon" id="alertIcon"></div>
        <div class="alert-modal-message" id="alertMessage"></div>
        <button
          class="alert-modal-close"
          id="alertCloseBtn"
          onclick="hideAlert()"
        >
          ç¡®å®š
        </button>
      </div>
    </div>

    <!-- æ·»åŠ äº¤æ˜“æ‰€æ¨¡æ€æ¡† -->
    <div id="addExchangeModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>æ·»åŠ äº¤æ˜“æ‰€è´¦æˆ·</h3>
        </div>
        <div class="form-group">
          <label>äº¤æ˜“æ‰€</label>
          <select id="new_exchange_name">
            <option value="binance">Binance</option>
            <option value="okx">OKX</option>
            <option value="bybit">Bybit</option>
            <option value="gate">Gate.io</option>
            <option value="bitget">Bitget</option>
          </select>
        </div>
        <div class="form-group">
          <label>API Key</label>
          <input type="text" id="new_api_key" placeholder="è¾“å…¥ API Key" />
        </div>
        <div class="form-group">
          <label>API Secret</label>
          <input
            type="password"
            id="new_api_secret"
            placeholder="è¾“å…¥ API Secret"
          />
        </div>
        <div class="form-group" id="passphrase_group" style="display: none">
          <label>Passphrase (ä»… OKX éœ€è¦)</label>
          <input
            type="password"
            id="new_passphrase"
            placeholder="è¾“å…¥ Passphrase"
          />
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" onclick="addExchange()">æ·»åŠ </button>
          <button class="btn" onclick="hideAddExchangeModal()">å–æ¶ˆ</button>
        </div>
      </div>
    </div>

    <script>
      // ç›‘å¬äº¤æ˜“æ‰€é€‰æ‹©å˜åŒ–
      document
        .getElementById("new_exchange_name")
        .addEventListener("change", function () {
          const passphraseGroup = document.getElementById("passphrase_group");
          const passphraseLabel = passphraseGroup.querySelector("label");

          if (this.value === "okx") {
            passphraseGroup.style.display = "block";
            passphraseLabel.textContent = "Passphrase (ä»… OKX éœ€è¦)";
          } else if (this.value === "bitget") {
            passphraseGroup.style.display = "block";
            passphraseLabel.textContent = "Passphrase (ä»… Bitget éœ€è¦)";
          } else {
            passphraseGroup.style.display = "none";
          }
        });

      async function loadExchanges() {
        try {
          const response = await fetch("/api/exchanges");
          const result = await response.json();

          if (result.success) {
            const exchanges = result.data;
            let html = "";

            if (exchanges.length === 0) {
              html =
                '<p style="color: #666;">æš‚æ— äº¤æ˜“æ‰€è´¦æˆ·ï¼Œè¯·ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ·»åŠ </p>';
            } else {
              exchanges.forEach((ex) => {
                const statusClass = ex.is_active
                  ? "status-active"
                  : "status-inactive";
                const statusText = ex.is_active ? "å¯ç”¨" : "ç¦ç”¨";
                html += `
                                <div class="exchange-item">
                                    <div>
                                        <span class="exchange-name">${ex.exchange_name}</span>
                                        <span class="exchange-status ${statusClass}">${statusText}</span>
                                    </div>
                                    <div>
                                        <button class="btn btn-danger" onclick="deleteExchange('${ex.exchange_name}')">åˆ é™¤</button>
                                    </div>
                                </div>
                            `;
              });
            }

            document.getElementById("exchanges-list").innerHTML = html;
          } else {
            document.getElementById("exchanges-list").innerHTML =
              '<p style="color: #ef4444;">åŠ è½½å¤±è´¥</p>';
          }
        } catch (error) {
          document.getElementById("exchanges-list").innerHTML =
            '<p style="color: #ef4444;">åŠ è½½å¤±è´¥</p>';
        }
      }

      function showAddExchangeModal() {
        document.getElementById("addExchangeModal").classList.add("show");
      }

      function hideAddExchangeModal() {
        document.getElementById("addExchangeModal").classList.remove("show");
        document.getElementById("new_api_key").value = "";
        document.getElementById("new_api_secret").value = "";
        document.getElementById("new_passphrase").value = "";
      }

      async function addExchange() {
        const exchangeName = document.getElementById("new_exchange_name").value;
        const apiKey = document.getElementById("new_api_key").value.trim();
        const apiSecret = document
          .getElementById("new_api_secret")
          .value.trim();
        const passphrase = document
          .getElementById("new_passphrase")
          .value.trim();

        if (!apiKey || !apiSecret) {
          showAlert("è¯·å¡«å†™ API Key å’Œ Secret", "error");
          return;
        }

        if (
          (exchangeName === "okx" || exchangeName === "bitget") &&
          !passphrase
        ) {
          showAlert(`${exchangeName.toUpperCase()} éœ€è¦ Passphrase`, "error");
          return;
        }

        // ç«‹å³å…³é—­æ¨¡æ€æ¡†
        hideAddExchangeModal();

        try {
          // æ˜¾ç¤ºåŠ è½½ä¸­æç¤ºï¼ˆä¸è‡ªåŠ¨æ¶ˆå¤±ï¼‰
          showAlert("â³ æ­£åœ¨æµ‹è¯•è¿æ¥ï¼Œè¯·ç¨å€™...", "info", false);

          const response = await fetch("/api/exchanges/add", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              exchange_name: exchangeName,
              api_key: apiKey,
              api_secret: apiSecret,
              passphrase: passphrase,
            }),
          });

          const result = await response.json();

          if (result.success) {
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            showAlert(result.message || "âœ… äº¤æ˜“æ‰€æ·»åŠ æˆåŠŸï¼", "success");
            // é‡æ–°åŠ è½½äº¤æ˜“æ‰€åˆ—è¡¨
            await loadExchanges();
          } else {
            // æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆä¿æŒæ¢è¡Œï¼‰
            const errorMsg = result.error || "æœªçŸ¥é”™è¯¯";
            showAlert("âŒ " + errorMsg.replace(/\\n/g, "\n"), "error");
          }
        } catch (error) {
          showAlert("æ·»åŠ å¤±è´¥: " + error.message, "error");
        }
      }

      async function deleteExchange(exchangeName) {
        if (!confirm(`ç¡®å®šè¦åˆ é™¤ ${exchangeName.toUpperCase()} å—ï¼Ÿ`)) {
          return;
        }

        try {
          const response = await fetch("/api/exchanges/delete", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ exchange_name: exchangeName }),
          });

          const result = await response.json();

          if (result.success) {
            showAlert("åˆ é™¤æˆåŠŸï¼", "success");
            loadExchanges();
          } else {
            showAlert("åˆ é™¤å¤±è´¥: " + (result.error || "æœªçŸ¥é”™è¯¯"), "error");
          }
        } catch (error) {
          showAlert("åˆ é™¤å¤±è´¥: " + error.message, "error");
        }
      }

      async function loadConfig() {
        try {
          const response = await fetch("/api/config");
          const result = await response.json();

          if (result.success) {
            const config = result.data;

            // å…¨å±€é…ç½®
            if (config.global) {
              document.getElementById("total_capital").value =
                config.global.total_capital || 100000;
              document.getElementById("max_capital_usage").value =
                config.global.max_capital_usage || 0.8;
              document.getElementById("max_positions").value =
                config.global.max_positions || 10;
              document.getElementById("price_refresh_interval").value =
                config.global.price_refresh_interval || 5;
              document.getElementById("funding_refresh_interval").value =
                config.global.funding_refresh_interval || 300;
              document.getElementById("opportunity_scan_interval").value =
                config.global.opportunity_scan_interval || 10;
            }

            // ç­–ç•¥1 é…ç½®
            if (config.strategy1) {
              document.getElementById("strategy1_enabled").value = String(
                config.strategy1.enabled,
              ).toLowerCase();
              document.getElementById("strategy1_execution_mode").value =
                config.strategy1.execution_mode || "auto";
              document.getElementById("strategy1_position_size").value =
                config.strategy1.position_size || 10000;
              // ç™¾åˆ†æ¯”å­—æ®µï¼šåç«¯å­˜å°æ•°ï¼Œå‰ç«¯æ˜¾ç¤ºç™¾åˆ†æ¯”
              document.getElementById("strategy1_min_funding_diff").value = (
                (config.strategy1.min_funding_diff || 0.0005) * 100
              ).toFixed(4);
              document.getElementById("strategy1_min_profit_rate").value = (
                (config.strategy1.min_profit_rate || 0.0003) * 100
              ).toFixed(4);
              document.getElementById("strategy1_max_price_diff").value = (
                (config.strategy1.max_price_diff || 0.02) * 100
              ).toFixed(2);
              document.getElementById("strategy1_max_position_size").value =
                config.strategy1.max_position_size || 15000;
            }

            // ç­–ç•¥2A é…ç½®
            if (config.strategy2a) {
              document.getElementById("strategy2a_enabled").value = String(
                config.strategy2a.enabled,
              ).toLowerCase();
              document.getElementById("strategy2a_execution_mode").value =
                config.strategy2a.execution_mode || "auto";
              document.getElementById("strategy2a_position_size").value =
                config.strategy2a.position_size || 10000;
              // ç™¾åˆ†æ¯”å­—æ®µï¼šåç«¯å­˜å°æ•°ï¼Œå‰ç«¯æ˜¾ç¤ºç™¾åˆ†æ¯”
              document.getElementById("strategy2a_min_funding_rate").value = (
                (config.strategy2a.min_funding_rate || 0.3) * 100
              ).toFixed(2);
              document.getElementById("strategy2a_max_basis_deviation").value =
                ((config.strategy2a.max_basis_deviation || 0.01) * 100).toFixed(
                  2,
                );
              document.getElementById(
                "strategy2a_min_annual_net_return",
              ).value = (
                (config.strategy2a.min_annual_net_return || 0.1) * 100
              ).toFixed(2);
              document.getElementById("strategy2a_max_position_size").value =
                config.strategy2a.max_position_size || 15000;
            }

            // ç­–ç•¥2B é…ç½®
            if (config.strategy2b) {
              document.getElementById("strategy2b_enabled").value = String(
                config.strategy2b.enabled,
              ).toLowerCase();
              document.getElementById("strategy2b_execution_mode").value =
                config.strategy2b.execution_mode || "manual";
              document.getElementById("strategy2b_position_size").value =
                config.strategy2b.position_size || 8000;
              document.getElementById("strategy2b_min_basis").value = (
                (config.strategy2b.min_basis || 0.02) * 100
              ).toFixed(2); // è½¬æ¢ä¸ºç™¾åˆ†æ¯”æ˜¾ç¤º
              document.getElementById("strategy2b_target_return").value =
                config.strategy2b.target_return || 0.015;
              document.getElementById("strategy2b_max_hold_days").value =
                config.strategy2b.max_hold_days || 7;
            }

            // ç­–ç•¥3 é…ç½®
            if (config.strategy3) {
              document.getElementById("strategy3_enabled").value = String(
                config.strategy3.enabled || false,
              ).toLowerCase();
              document.getElementById("strategy3_position_pct").value = (
                (config.strategy3.position_pct || 0.1) * 100
              ).toFixed(0);
              document.getElementById("strategy3_min_funding_rate").value = (
                (config.strategy3.min_funding_rate || 0.0001) * 100
              ).toFixed(4);
              document.getElementById("strategy3_stop_loss_pct").value = (
                (config.strategy3.stop_loss_pct || 0.05) * 100
              ).toFixed(2);
              document.getElementById("strategy3_check_basis").value = String(
                config.strategy3.check_basis !== undefined
                  ? config.strategy3.check_basis
                  : true,
              ).toLowerCase();
              document.getElementById("strategy3_short_exit_threshold").value =
                ((config.strategy3.short_exit_threshold || 0.0) * 100).toFixed(
                  3,
                );
              document.getElementById("strategy3_long_exit_threshold").value = (
                (config.strategy3.long_exit_threshold || 0.0) * 100
              ).toFixed(3);
            }

            // é£æ§é…ç½®
            if (config.risk) {
              // ç™¾åˆ†æ¯”å­—æ®µï¼šåç«¯å­˜å°æ•°ï¼Œå‰ç«¯æ˜¾ç¤ºç™¾åˆ†æ¯”
              document.getElementById("risk_max_loss_per_trade").value = (
                (config.risk.max_loss_per_trade || 0.02) * 100
              ).toFixed(2);
              document.getElementById("risk_max_drawdown").value = (
                (config.risk.max_drawdown || 0.1) * 100
              ).toFixed(2);
              document.getElementById("risk_max_position_per_exchange").value =
                config.risk.max_position_per_exchange || 30000;
              document.getElementById("risk_dynamic_position_enabled").value =
                String(config.risk.dynamic_position_enabled).toLowerCase();
            }
          }
        } catch (error) {
          showAlert("åŠ è½½é…ç½®å¤±è´¥", "error");
        }
      }

      async function saveConfig() {
        // é˜²æ­¢é‡å¤æäº¤
        const saveBtn = event.target;
        if (saveBtn.disabled) return;
        saveBtn.disabled = true;
        saveBtn.textContent = "â³ ä¿å­˜ä¸­...";

        try {
          const updates = [
            // å…¨å±€é…ç½®
            {
              category: "global",
              key: "total_capital",
              value: parseFloat(document.getElementById("total_capital").value),
            },
            {
              category: "global",
              key: "max_capital_usage",
              value: parseFloat(
                document.getElementById("max_capital_usage").value,
              ),
            },
            {
              category: "global",
              key: "max_positions",
              value: parseInt(document.getElementById("max_positions").value),
            },
            {
              category: "global",
              key: "price_refresh_interval",
              value: parseInt(
                document.getElementById("price_refresh_interval").value,
              ),
            },
            {
              category: "global",
              key: "funding_refresh_interval",
              value: parseInt(
                document.getElementById("funding_refresh_interval").value,
              ),
            },
            {
              category: "global",
              key: "opportunity_scan_interval",
              value: parseInt(
                document.getElementById("opportunity_scan_interval").value,
              ),
            },
            // ç­–ç•¥1 é…ç½®
            {
              category: "strategy1",
              key: "enabled",
              value:
                document.getElementById("strategy1_enabled").value === "true",
            },
            {
              category: "strategy1",
              key: "execution_mode",
              value: document.getElementById("strategy1_execution_mode").value,
            },
            {
              category: "strategy1",
              key: "position_size",
              value: parseFloat(
                document.getElementById("strategy1_position_size").value,
              ),
            },
            // ç™¾åˆ†æ¯”å­—æ®µï¼šå‰ç«¯è¾“å…¥ç™¾åˆ†æ¯”ï¼Œåç«¯å­˜å°æ•°
            {
              category: "strategy1",
              key: "min_funding_diff",
              value:
                parseFloat(
                  document.getElementById("strategy1_min_funding_diff").value,
                ) / 100,
            },
            {
              category: "strategy1",
              key: "min_profit_rate",
              value:
                parseFloat(
                  document.getElementById("strategy1_min_profit_rate").value,
                ) / 100,
            },
            {
              category: "strategy1",
              key: "max_price_diff",
              value:
                parseFloat(
                  document.getElementById("strategy1_max_price_diff").value,
                ) / 100,
            },
            {
              category: "strategy1",
              key: "max_position_size",
              value: parseFloat(
                document.getElementById("strategy1_max_position_size").value,
              ),
            },
            // ç­–ç•¥2A é…ç½®
            {
              category: "strategy2a",
              key: "enabled",
              value:
                document.getElementById("strategy2a_enabled").value === "true",
            },
            {
              category: "strategy2a",
              key: "execution_mode",
              value: document.getElementById("strategy2a_execution_mode").value,
            },
            {
              category: "strategy2a",
              key: "position_size",
              value: parseFloat(
                document.getElementById("strategy2a_position_size").value,
              ),
            },
            // ç™¾åˆ†æ¯”å­—æ®µï¼šå‰ç«¯è¾“å…¥ç™¾åˆ†æ¯”ï¼Œåç«¯å­˜å°æ•°
            {
              category: "strategy2a",
              key: "min_funding_rate",
              value:
                parseFloat(
                  document.getElementById("strategy2a_min_funding_rate").value,
                ) / 100,
            },
            {
              category: "strategy2a",
              key: "max_basis_deviation",
              value:
                parseFloat(
                  document.getElementById("strategy2a_max_basis_deviation")
                    .value,
                ) / 100,
            },
            {
              category: "strategy2a",
              key: "min_annual_net_return",
              value:
                parseFloat(
                  document.getElementById("strategy2a_min_annual_net_return")
                    .value,
                ) / 100,
            },
            {
              category: "strategy2a",
              key: "max_position_size",
              value: parseFloat(
                document.getElementById("strategy2a_max_position_size").value,
              ),
            },
            // ç­–ç•¥2B é…ç½®
            {
              category: "strategy2b",
              key: "enabled",
              value:
                document.getElementById("strategy2b_enabled").value === "true",
            },
            {
              category: "strategy2b",
              key: "execution_mode",
              value: document.getElementById("strategy2b_execution_mode").value,
            },
            {
              category: "strategy2b",
              key: "position_size",
              value: parseFloat(
                document.getElementById("strategy2b_position_size").value,
              ),
            },
            // ç™¾åˆ†æ¯”å­—æ®µï¼šå‰ç«¯è¾“å…¥ç™¾åˆ†æ¯”ï¼Œåç«¯å­˜å°æ•°
            {
              category: "strategy2b",
              key: "min_basis",
              value:
                parseFloat(
                  document.getElementById("strategy2b_min_basis").value,
                ) / 100,
            },
            {
              category: "strategy2b",
              key: "target_return",
              value: parseFloat(
                document.getElementById("strategy2b_target_return").value,
              ),
            },
            {
              category: "strategy2b",
              key: "max_hold_days",
              value: parseInt(
                document.getElementById("strategy2b_max_hold_days").value,
              ),
            },
            // ç­–ç•¥3 é…ç½®
            {
              category: "strategy3",
              key: "enabled",
              value:
                document.getElementById("strategy3_enabled").value === "true",
            },
            {
              category: "strategy3",
              key: "position_pct",
              value:
                parseFloat(
                  document.getElementById("strategy3_position_pct").value,
                ) / 100,
            },
            {
              category: "strategy3",
              key: "min_funding_rate",
              value:
                parseFloat(
                  document.getElementById("strategy3_min_funding_rate").value,
                ) / 100,
            },
            {
              category: "strategy3",
              key: "stop_loss_pct",
              value:
                parseFloat(
                  document.getElementById("strategy3_stop_loss_pct").value,
                ) / 100,
            },
            {
              category: "strategy3",
              key: "check_basis",
              value:
                document.getElementById("strategy3_check_basis").value ===
                "true",
            },
            {
              category: "strategy3",
              key: "short_exit_threshold",
              value:
                parseFloat(
                  document.getElementById("strategy3_short_exit_threshold")
                    .value,
                ) / 100,
            },
            {
              category: "strategy3",
              key: "long_exit_threshold",
              value:
                parseFloat(
                  document.getElementById("strategy3_long_exit_threshold")
                    .value,
                ) / 100,
            },
            // é£æ§é…ç½® - ç™¾åˆ†æ¯”å­—æ®µï¼šå‰ç«¯è¾“å…¥ç™¾åˆ†æ¯”ï¼Œåç«¯å­˜å°æ•°
            {
              category: "risk",
              key: "max_loss_per_trade",
              value:
                parseFloat(
                  document.getElementById("risk_max_loss_per_trade").value,
                ) / 100,
            },
            {
              category: "risk",
              key: "max_drawdown",
              value:
                parseFloat(document.getElementById("risk_max_drawdown").value) /
                100,
            },
            {
              category: "risk",
              key: "max_position_per_exchange",
              value: parseFloat(
                document.getElementById("risk_max_position_per_exchange").value,
              ),
            },
            {
              category: "risk",
              key: "dynamic_position_enabled",
              value:
                document.getElementById("risk_dynamic_position_enabled")
                  .value === "true",
            },
          ];

          let success = true;
          let errors = [];

          // æ·»åŠ é‡è¯•å‡½æ•°
          async function updateConfigWithRetry(update, maxRetries = 3) {
            for (let attempt = 1; attempt <= maxRetries; attempt++) {
              try {
                const response = await fetch("/api/config/update", {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify(update),
                });
                const result = await response.json();
                if (result.success) {
                  return { success: true };
                } else if (
                  result.error &&
                  result.error.includes("database is locked")
                ) {
                  // æ•°æ®åº“é”å®šï¼Œç­‰å¾…åé‡è¯•
                  if (attempt < maxRetries) {
                    await new Promise((resolve) =>
                      setTimeout(resolve, 100 * attempt),
                    );
                    continue;
                  }
                }
                return { success: false, error: result.error };
              } catch (error) {
                if (
                  attempt < maxRetries &&
                  error.message.includes("database is locked")
                ) {
                  await new Promise((resolve) =>
                    setTimeout(resolve, 100 * attempt),
                  );
                  continue;
                }
                return { success: false, error: error.message };
              }
            }
            return { success: false, error: "é‡è¯•æ¬¡æ•°å·²ç”¨å®Œ" };
          }

          // é€ä¸ªæ›´æ–°é…ç½®ï¼Œé¿å…å¹¶å‘å¯¼è‡´æ•°æ®åº“é”å®š
          for (const update of updates) {
            const result = await updateConfigWithRetry(update);
            if (!result.success) {
              success = false;
              errors.push(`${update.category}.${update.key}: ${result.error}`);
            }
            // æ·»åŠ å°å»¶è¿Ÿï¼Œé¿å…è¯·æ±‚è¿‡å¿«
            await new Promise((resolve) => setTimeout(resolve, 10));
          }

          if (success) {
            showAlert("âœ… é…ç½®ä¿å­˜æˆåŠŸï¼æ›´æ”¹å°†ç«‹å³ç”Ÿæ•ˆ", "success");
          } else {
            showAlert("âŒ é…ç½®ä¿å­˜å¤±è´¥:\n" + errors.join("\n"), "error");
          }
        } catch (error) {
          console.error("ä¿å­˜é…ç½®æ—¶å‡ºé”™:", error);
          showAlert("âŒ ä¿å­˜é…ç½®æ—¶å‡ºé”™: " + error.message, "error");
        } finally {
          // æ¢å¤æŒ‰é’®çŠ¶æ€
          saveBtn.disabled = false;
          saveBtn.textContent = "ğŸ’¾ ä¿å­˜æ‰€æœ‰é…ç½®";
        }
      }

      function showAlert(message, type, autoDismiss = true) {
        console.log("showAlert called:", message, type); // è°ƒè¯•æ—¥å¿—

        // ä½¿ç”¨ setTimeout ç¡®ä¿åœ¨å½“å‰æ‰§è¡Œæ ˆå®Œæˆåæ˜¾ç¤ºå¼¹çª—
        setTimeout(() => {
          const alertModal = document.getElementById("alertModal");
          const alertIcon = document.getElementById("alertIcon");
          const alertMessage = document.getElementById("alertMessage");
          const alertCloseBtn = document.getElementById("alertCloseBtn");

          if (!alertModal) {
            console.error("alertModal element not found!");
            alert(message); // å¦‚æœæ‰¾ä¸åˆ°æ¨¡æ€æ¡†ï¼Œä½¿ç”¨æµè§ˆå™¨åŸç”Ÿalert
            return;
          }

          // è®¾ç½®å›¾æ ‡
          const icons = {
            success: "âœ…",
            error: "âŒ",
            info: "â„¹ï¸",
          };
          alertIcon.textContent = icons[type] || "â„¹ï¸";

          // è®¾ç½®æ¶ˆæ¯
          alertMessage.textContent = message;

          // è®¾ç½®æŒ‰é’®æ ·å¼
          alertCloseBtn.className = `alert-modal-close ${type}`;

          // å¼ºåˆ¶è§¦å‘é‡ç»˜ï¼Œç¡®ä¿æ˜¾ç¤º
          alertModal.style.display = "flex";
          alertModal.classList.add("show");
          console.log("Modal should now be visible"); // è°ƒè¯•æ—¥å¿—

          // å¦‚æœ autoDismiss ä¸º trueï¼Œ5ç§’åè‡ªåŠ¨å…³é—­
          if (autoDismiss) {
            setTimeout(() => {
              hideAlert();
            }, 5000);
          }
        }, 0);
      }

      function hideAlert() {
        const alertModal = document.getElementById("alertModal");
        if (alertModal) {
          alertModal.classList.remove("show");
          alertModal.style.display = "none";
        }
      }

      // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
      loadExchanges();
      loadConfig();
    </script>
  </body>
</html>
